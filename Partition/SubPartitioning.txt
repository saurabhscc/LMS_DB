/*Create Table for subpartition*/

CREATE TABLE hired_candidates_sub_partition (
  id int(11) NOT NULL  ,
  first_name varchar(100) NOT NULL,
  middle_name varchar(100) DEFAULT NULL,
  last_name varchar(100) NOT NULL,
  email varchar(50) NOT NULL,
  mobile_num bigint(20) NOT NULL,
  hired_city varchar(50) NOT NULL,
  hired_date datetime NOT NULL,
  permanent_pincode int(11) DEFAULT NULL,
  degree varchar(100) NOT NULL,
  creator_stamp date DEFAULT NULL
  )
PARTITION BY RANGE( YEAR(hired_date))
SUBPARTITION BY HASH( TO_DAYS(hired_date))  
SUBPARTITIONS 2 (  
PARTITION p0 VALUES LESS THAN (2017),  
PARTITION p1 VALUES LESS THAN (2020) 
);     

/*Check partition created by table by select statement and where clause*/

SELECT TABLE_NAME, PARTITION_NAME, TABLE_ROWS  
FROM INFORMATION_SCHEMA.PARTITIONS  
WHERE TABLE_SCHEMA = 'lms' AND TABLE_NAME = 'hired_candidates_sub_partition'; 

/*Insert row to table*/
insert into hired_candidates_sub_partition values(1,'Arun', 'Ajay', 'Patil', 'arun@gmail.com ', 9890111111, 'Delhi','2014-01-30',2222,'B.E','2014-01-30');

/*Check partition created by table by select statement and where clause*/

SELECT TABLE_NAME, PARTITION_NAME, TABLE_ROWS  
FROM INFORMATION_SCHEMA.PARTITIONS  
WHERE TABLE_SCHEMA = 'lms' AND TABLE_NAME = 'hired_candidates_sub_partition'; 

/*Insert row to table*/

insert into hired_candidates_sub_partition values(2,'Amit', 'Ajay', 'Patil', 'amit@gmail.com ', 9890111112, 'Delhi','2014-06-30',2222,'B.E','2014-06-30');

/*Check partition created by table by select statement and where clause*/

SELECT TABLE_NAME, PARTITION_NAME, TABLE_ROWS  
FROM INFORMATION_SCHEMA.PARTITIONS  
WHERE TABLE_SCHEMA = 'lms' AND TABLE_NAME = 'hired_candidates_sub_partition'; 
